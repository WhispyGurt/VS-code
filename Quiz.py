import random
from datetime import datetime
import os
import csv


# --- Configuration ---
POINTS_FOR_CORRECT = 10
SCORE_DIVISOR = 2


# --- ASCII Art ---
MIKU = """
   @@@@@@@@@%#%%###########*****###############%%%%#################%###############%%%###***######################%%##%%********####################################################%%%%%%%%%%%%%%%%%
%@@@@@@%**#%############****#################%%%%#################%%###############%@%##**+**#####################%#*#%#*************###############################################%%%%%%%%%%%%%%%
@%%@@%#**#%%###########*****##################%%%##################%#####**#########%%%%##*++***#################*##%**#%******************##############################################%%%%%%%%%%
%%@%#***##%############****####################%%###################%#####***########%##%%#**++*********###########*#%###%%******************################################################%%%%%%
%%%#***###%############****####################%%%###################%#####****#######%###%#***++************#*****##*%#**#%%#######**************************##################################%%%
%%#***#%##%###########****#######################%###############*####%%#*##****#######%#**#%#**+++******************#*%#**#%%######%%%###***#******************###################################
%#***#%%#*%###########***########################%%#*************#*###%%#####*****#*####%##*#%#**++++*******************##***#%%##########%%#*********************#################################
#***##%#**%##########**#########################%#%#*****************###*%##*********###%#****#%#**+++*******************##***#%%#############%#####*##*##****#####################################
***###%##*###########**###**###########*##########%%*****************##%#*###*********#*##*+****##**+++*******************##***#%#%%%%%###########%##*###*#########################################
**####%##*###########***#****##**##********########%#*****************##**+*##********#####+++***#%**++++******************##***#%##%@@@@@%%%#**##*##%#############################################
**####%##*###########***********************#######%%*****************###*+++##*********##%#++++***%#**+++******************##****%##%%%@@%@@@%%#######%#######################################%%%%
*#####%##*#%*######********+*****************#######%#****************##***+++*##*********#%*++++***##**+++******************#*****####%%%%@@@@%@%%##***#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
*#####%#**#%#**************++*******************####%#****************###**+==++##*********##+++++***##***+++*****************#***+*##*#%%%%%%%@%%@@%%#***#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
#######%#*###***************++**+****************####%*****************#*+++====+*##********#*+===++***#**++++****************##****###*##%%%%%%%%%%%@@%#***#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
#######%***#%***************+++*++****************###%#****************#*+*++=====*##*******##+==++=+***%**+++++**************+#****+####**%%%%%%%%%%%@%%%#***#%%%%%%%%%%%%%%%%%%%@@@@@%%%%%%%@@@@@
#######%#***%#**************++++++****************#####****************#*++++======+##*******#*======+*+*#***++++************+**#***++%###**#%%%%%%%%%%%%@%%%#***%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
########%***#%**************+++++++=+***************###%*+**************#+++++=========*#******%%%%%%%@@@@@@@*++++++++++++++**+*+#*+++++#####***#%%%%%%%%%%%%%%@%#*+*%@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%
*#########****#*************+++++++++***************####*+************##++++++===-==+*#%%******#*+=======+++#*++++++++++++++*+*+*#++++++#####***#%%%%%%%%%%%%%%%%%#*+#%@%@@@@@@@@@@@@@@@@@@@@@@@%%%
**#######%#***##************+++++++++***************####*++++*********#*++++++=+*#####*++******#*+========+++**++++++++++++++++*+#*+++++*#####****#%%%%%%%%%%%%%%%%%#**%@%%@@@@@@@@%%@@@@%@@@@@@%%%
***#######%****##************+++++++++*+*************##%*++++++++*****#*++++*%##**+======+*****##++========+++**+++++++++++++++++*#++++++*%####****#%%%%%%%%%%%%%%%%%#**#%%%@@@@@@@%%%@@@@@@@@@@%##
****########***##************++++++++++++*************#%#+++++++******#++*%@%*+============*#***#*++========+++**+++++++++++++++++#*++++++#@%#*#***+*%%%%%%%%%%%%%%%%%%#+#@@@@@@@@@%%@@@@@@%%@@%%%%
*****######%*+**##***********++++++++++++*************###+++++++++****%#%%*+================+*****+==========+++#*++++++++++++++++#*++++++*%%%%#******#%#%%%%%%%%%%%%%%%#**%@@@%%%%%@@@%%%%%@@@%%##
******######%****##**********+++++++++++++************##%*++++++++***#%*+====+=============+=+***#+=+====-====+++#*+++++++++++++++*#+++++++#%%%%##*****#%%#%%%%%%%%%%%%%%%**%@@@%%%%%%%#%@@@@@@%%##
*********####%****#***********++++++++++++++***********#%*+++++++++**#+=======================+#***====----===++++*++++++++++++++++#*+++++++#%%%%%#******#%%%%%%%%%%%%%%%%%*+%@%%@@%%%%%@@@@@@@%%##
********#####%#****#**********+++++++++++++++*********##%*+++++++***#*===================-----=+***====+=--=-=*==++#+++++++++++++++**+++++++*#%%%%%#******#%%%%%%%%%%%%%%%%%*+%@@@@@@@@@@@@@@@@@%##
*********#####%*****#**+********+++++++++++++**********##*+++++++***#+===============---=-------+*#+++*#+++=+%*==++*#++++++++++++++**++++++++*%%%%%%%#*****#%%%%%%%%%%%%%%%%%**%@@%%%%#%%#%%%%%%###
*********#######****##********++++++++++++++++*********###+++++++**#*==================--------+*%*@@@@@@@@@@@@%*+#%**+++++++++++++**++++++++####%%%%%%***++*%%%%%%%%%%%%%%%%%#*%@%%%%%%%%#########
*********#####%***+**##**********+++++++++++++*********###+++++****#================+=------*%@@@@%%##**++**#%@@@@@%+**++++++++++++**++++++++*#**#%%%%%%#***+*%%%%%%%%%%%%%%%%%##@%#%@%%%#%%%######
**********######=#****##**********++++++++++++++*******###+++++*****==============*===---=%@@@%*=--=-----------==#@@%%%++++++++++++*#+++++++++#***##%%%%%#***+*#%%%%%%%%%%%%%%%%*#%##%%#*###%######
***********#####*=*****#***********++++++++++++********###++++*****============-++-=---+%@@@*----+*%%@@%@@%#*=---=-=#%**+*+++++++++*#+++++++++#****##%%%%%%#**++#%%%%%%%%%%%%%%%#+#%%%#%###%%%%####
************#####==*****#***********++++++++++*+*******###+++****#*=============+===-+%@@@*---=#%%%%%%%%%%%%%%%#=----=##*++++++++++*#*++++++++##**+###%%%%%%#*+++*%%%%%%%%%%%%%%%#*%%%####%%%%%####
*************###%+==*****##***+******+++++++++**********%#+*++****=========---===--=**@@%=---#%#%%%%%%%%%%%%%%%%%#+---=*#*+++++++++*#*+++++++++%****+====+%%%%%#*++*#%%%%%%%%%%%%%%*%%%%%%%#%%%%###
*************#####+==#*+**##***********++++++**********#%*+++***#==========-------=*+%@%=-:-#%%%%%%%%%#####%%%%%%%%#----+*+++++++++*#*+++++++++%****+=====+#%%%%%*+++#%%%%%%%%%%%%%######%%%######*
*************#*##%*==-*****##***********+++++**********##*+****#+==========------==-#@@=--:*%%%%%%%%##########%%%%%%%=---*+++++++++*#*+++++++++%****+=====+#%%%%%*+++#%%%%%%%%%%%%%*****%@@@%#####
#*************#####+===******#*+**********************##%******+========------=----+@@+--:-#**#%%%%###******####%#%%%@=--=*++++++++***+++++++++%#+***=---==+%%%%%%#*++#%%%%%%%%%%%%%*****##%%%####*
##*************#####+-==**+**##*+*****+***************##%******=========-----------#@%=-::::::::=*###**********#%%%%%%%=--+*+++++++***+++++++++%%=*#*+---===#%%%%%%%*++*%%%%%%%%%%%%#****##%%%####*
*#*+**********##*###*-=*#******#**********************###****#+=========----------=%%#--:::::::::-*#+=****+****###%**#%#--+*++++++****+++++++++@%=+##+=--===+%%%%%%%%#++*%%%%%%%%%%%#*#**###%%%####
*##*+**********######*#%+-+*****##********************###***#+=========-----------=#**-:::::::::::=%##****==****#*+==*%@*-=*++++++*#***++++++++@@++##*+=====+##%%%%%%%#*+*#%%%%%%%%%%##*####%%#####
#*##************#####%%+====*****##******************###***#+=========------------==+*:::::::::::-*%###*****#***##=---=*#==**+*+*+*#***+++++++*@@%@@@@@%+=+==####%%%%%%#*+*#%%%%%%%%%####%%@@%%####
##**%************######+=====*****##*****************###**#*=========----------------*-::::::=+=*#%%%###********#*=----=*+=+*****+##***+++++++#@@@@@@@@@*====#####%%%%%%%*++#%%%%%%%%%#%@%%%%%%%%%%
*##**%#**********#######+=====+#+*#*##***************###*#*==========----------------==:::::::*@%%%%#+=+*##****##++====++--+******#****+++++++%@@%#%@@%+===++#####%%%%%%%%#++#%%%%%%%%#%@%##########
**##**##**+*******#######+=====+***####*************#####*===========------------------::::::::+%%%%+=====+****++===+=+=---+******#*****+++++*@@@%+====+=+++*#######%%%%%%%#*+*%%%%%%%%#%%%########
**#%#*###**********#######+======*****###************###*===========--------------------:::-::::-#@#===-=====++==+==+*=----+*****#******+++++#@@@%++=+++++++*%%######%%%%%%%%*+*%%%%%%%#%%%%%%#****
***%%%#*##**********#######+======+#**####**********###*===========------------------------:-::--:=#===============*+------+*****%******+*+++%@@@%*+++++**++%%@#######%%%%%%%%#+*%%%%%%#%%%%%%%##%%
***#%%%###%#*********#####%#+=====-=**######********###+===========-------------------------:::-::-:+*+=========+*+--------=****##******++++*%@@@%*+++*+++*#@%%%%######%%%%%%%%#**%%%%%%%@%@%@@%%%@
****#%%%####%********########+=======+#*##%@#*******####+===========-------------------------==-----:-=+++=+***+=----------=*****#*******+*+#@@@@%*++**+*#%@%%%@@#######%%%%%%%%%**#%%%%#@@%@@%%%@@
*****%%%@%###%#*******#######%+======*@%###**%#****###%%@#+=========----------------------------=----===++==---=-----------+****+#**********%@@@@%****##@@@@@@@@@%#*#####%%%%%%%%%*+#%%%#%%%%%%%%%@
*****#%%@%@%###%#******#####%#%+===-+@@@**###%%%#**###%%%%%*========------------------------------------==-----------------+****=#*********#@@@@@%#%%%%%%%%%%%@%%@%#######%%%%%%%%%#+#%%#%@%%%@%%@@
*#****#%%@@@@###%%*****########%*+==#@@+=-+##%%%%#**#%%%%%%%#+======-------------------------------------------------=-----+**#++#*********%@@@@@@%%%%%%@@@@@%%%%#*++====+*#%%%%%%%%#+#%%%@@@@@@%%%
%******#@%@@@@%%##%#***########%%#*#%@%=---=+#**%%########%%%#+======------------------------------------------------------*##+=+#********#@@%@@@%%%%%%%@@%#*+==-=====---=----+#%%%%%#*#%%@@@@@%%%%
@%******%@@@@@@@@%##%##***######%%*=+%@+=----=*++#**####*#%%%+======------------------------------------------------------=*#*==+#********%%%%@@@@@@@%%%*+=-===============-===-=*%%%%%*#%@@@@@%%%%
@@%#*##**%@@@@@@@@@@%#%#**########%#**@*===-==-=*#%##*++###*=++=====------------------------------------------------------=##===*********#%%%@@@@@@@#+====================-==-----=#@%%%*+%@@@%%%%%
@@@%*****#%@@@@@@@@@@@%%%%########%%#+#%+====+++*%%%########=--=====---==----------------------------------------------=--=#*-==********#%%%%%%%@@*==============================-==*@%%%*#@@@%%%%%
@@%#%####*#%@@@@@@@@@@@@@@@%#*####%%%#*=*+=-=-#%%%@%*#######*++=====-======----------------------------------==------=-=--+*===+********%@@@%#%@@#+=================================-*%%%%*#@@%%%%%
@@%#@%######%%%@@@@@@@@@@@%@%%#####%%%%#+=+===-=%@%#++*##%%#*+++-=================-------------------------============---====++#******%@@@@@@@@@*====================================*@%%%#%@%%%@%
@@@@%%@%#*#*#%@@@@@@@@%%@@@%%@@%#####%%%@*======-+@#+++++++++++==========================-------------================--==-===+*#*****#@@@@@@@@@%*=====================================#@%%%#%@@@@@
@@@@@@@@@%#####%%@@@@@@@@@%@@@@@@%###%%%%@@*=++====**+++++++*+=======================================================-===-===+*##****#@@@@@@@@@%#*=====================================*%%%%##@@@@%
@@@@@@@@@@@%####%@@@@@@@@@@@@%@@@@@@%%#%%%@@%*=++++==+*****+==========++====================================================+**##***#@@@@@@@@@@%#*=====================================+%%%%%#%@@@%
@@@@@@@@@@@@@%###%@@@@@@@@@@@@@@@@%@@@@%#%%@@@%*=+++++=+==================================================================++***#####@@@@@@@@@@@###=====================================+%%%%@%%@@%%
@@@@@@@@@@@@@@%%###%@@@@@@@@@@@@@@@%@@@@@@%%@@@@%+========================================================================+**+#####@@@@@@@@@%%%%#*+====================================+%%%%@@%%@%%
@@@@@@@@@@@%%%@@@%###%@@@@@@@@@@%@@@@%@@@@@@@@@@@%#==+==+===============================================================+***+*####@@@@@@@@@@##%%%%*====================================+%%%%@@%%@%%
@@@@@@@%%%%@@@@@@@%#%%%%@@@@@@@@@@@@@@@@@@@@@@@@@%@%*+++=++++=========================================================++*#***%##%@@@@@@@@@@#+##%@@#+===================================*%%%%%@@@@%%
@@@@@@@@@@@@@@@@@@@%###%%%@@@@@@@@@@@@@@@@@@@@@@@@%%%%*=++++++++=====================================================++#****%%#%@@@@@@@@@@%*+*%%@@@+=+=================================#@%%%@@@@@%@
@@@@@@@@@@@@@@@@@@@%%%###%@@@@@@@@@@@@@@@@@@@@@@@@%@%%@%+++++++++++++============================================++++##***#@%#%@@@@@@@@@@@*+++%@@@@#+++=============================++*%%%@@@@@@@%@
@@@@@@@@@@@@@@@@@@@@##%####@@@@@@@@@@@@@@@@@%#%@@@@%%%%@@%*++=++++++++++++++++========+==+#%##*=================+++*#***#@@@%@@@@@@@@@@@@#++++*@@@@@*+++++++++++++++++++++++++++++++++*%%%@@@@%@@%%
@@@@@@@@@@@@@@@@@@@@###%%###%@@@@@@@@@@@@@@@@%##%@@@@@%%%%@%#++++++++++++++++++++++++=+++++###+++=+++++++++++++++*#***#@@@@@@@@@@@@@@@@@%++++++#@@@@%+++++++++++++++++++++++++++++++++*%%%@@@@%@@@@
@@@@@@@@@@@@@@@@@@@%####%@%###@@@@@@@@@%@@@@@@@%###%@@@@@@@@@@%*++++++++++++++++++++++++++++++++++++++++++++++++#**#@@@@@@@@@@@@@@@@@@@%++++++++@@@@@#++++++++++++++++++++=+++++++++++%%#%@@@@@@@%@
@@@@@@@@@@@@@@@@@@@@####%@@@%##%@@@@@@@@@@@@@@@@%@@@@@@@@@@@@@@@@%#*+++++++++++++++++++++++++++++++++++++++++*%%%@@@@@@@@@@@@@@@@@@@@@%+++++++++#@@@%%*++++++++++++++++++++++++**+++++#%#%@@@@@@@%%
@@@@@@@@@@@@@@@@@@@@%###%@@@%@%##%@@@@@@@@@@@@%%%%%%%@@@@@@@@@%%%%%@@@%#**+++++++++++++++++++++++++++++++++*%@@%#@@@@@@@@@@@@@@@@@@@@#++++++++++*%@@#%#++++++++++++++++++++++++*++++++#%#%@@@@@@%%%
@@@@@@@@@@@@@@@@@@@@%###%@@@@%@@%##%@@@@@@@@@%%@@%%@@@@@@@@%%%%%%%%%@@@@@@@@%#*****++++++++++++++++++++++*%@@@@@%#%@@@@@@@@@@@@@@@%%#++++++++++++#@@@@@*++++++++++++++++++++**++*+++++%%##@@@@@@%%%
@@@@@@@@@@@@@@@@@%%%%#%#%@@@@%%@%%%#%%@@@@@@@@%%%%%%%@@@@@%%%%%%@%@@%%%@@%@*++--**-+#**#####****++++++**#**#@@@@@@##@@@@@@@@@@@@%%#*+++++++++++++*%@@@@%+++++++++++++++++++***+++++++*%%##@@@@@@%##
@@@@@@@@@@@@@@@@%%%%%#%%%@@@@%%@%%%%%%%@@@@@@@@%%%@@@@@@%%%%%%%%@@@@@@@%%%@#+#++====+*##**@@@%***###******#**#@@@@@#*%@@@@@@@@@%%*+++++++++++++*++*@@@@@*++++++++++++++++*###*****++*%%%##%@@@@####
@@@@@@@@@@@@%%%@%%%@%#%%%@@@@%%@%%%%%%%%%%@@@@@@@@@@@@%%%%%%@%%@@@@@@@@%%%%#=#+-=**==**###%@@@#****************#%@@@%##%@@@@@%%*+++++++**++++++*+++%@@@@@%*+++++++++++*+***++*@#*****#**###%%@@*##**
@@@@@@@@@@@%%%%%@@@@%#%%%@@@@%%@@%%%%%%%@%%%@@@@@@@@%%%%%%%%@@%@@@@@@@@@%%%@%%%%%%%%%%%%%%%@@@%#******************#%@%*##@@%#*+**+**+**++******+**+#@@@@@#***+++++++*+***+*++%@#************#*=+*#%
@@@@@%%%%@@%%%%%%@@@@%%%%@@@@%%@@%%%%%%%@@@@%%@@@@@%%%%%%%%%@@@@@@@@@@@%%@%%%%%%%%%%%%#####%##@@******########**#######****++***+***************+***#%@@@%********+*+********%@#**##*********#+##%%
@@@@@%@%%@@@%%%%%%@@@%%%%@@@@@%@@%%%%%%%@@@@@@@%@@@%%%%%%%%%@@@@@@@@@@%%%%%%%%%%%%###########%%@@%*************#*****#******************************###%@@*******************@%##%**********##**###
%%%%@@@@@@@@@@@@@
"""


# --- The list of questions ---
QUESTIONS = [
    {
        "question": "Are you lucky?",
        "options": ["A. Yes", "B. No"],
    },
    {
        "question": "Life has meaning'.",
        "options": ["A. True", "B. False"],
    },
    {
        "question": "Blue or red?",
        "options": ["A. Blue", "B. Red"],
    },
    {
        "question": "Yes or no?",
        "options": ["A. Yes", "B. No"],
    },
    {
        "question": "Heads or Tails?",
        "options": ["A. Heads", "B. Tails"],
    },
    {
        "question": "Is the number even or odd? (Let's see...)",
        "options": ["A. Even", "B. Odd"],
    },
]


# This function saves in the script's local directory ---
def save_score(player_name, score):
    """Saves the player's score to a CSV file in a folder next to the script."""
    try:
        # Get the directory where the script is running
        script_dir = os.path.dirname(os.path.abspath(__file__))
        # Define the folder and file path relative to the script's location
        folder_path = os.path.join(script_dir, 'quiz_scores')
        file_path = os.path.join(folder_path, 'scores.csv')


        os.makedirs(folder_path, exist_ok=True)
        file_exists = os.path.isfile(file_path)


        with open(file_path, 'a', newline='') as csvfile:
            headers = ['Player', 'Score', 'Date']
            writer = csv.DictWriter(csvfile, fieldnames=headers)
            if not file_exists:
                writer.writeheader()
            writer.writerow({
                'Player': player_name,
                'Score': score,
                'Date': datetime.now().strftime("%Y-%m-%d %H:%M:%S")
            })
        print(f"\n✅ Score successfully saved to the 'quiz_scores' folder.")


    except Exception as e:
        print(f"\n❌ Oh no! There was an error saving your score: {e}")




def run_quiz():
    """This function runs a quiz and displays feedback."""
    score = 0
    correct_streak = 0
   
    print("--- Welcome to the 50/50 Game of Chance! ---")
    print("Your knowledge doesn't matter here, only your luck!")
    print(f"You get {POINTS_FOR_CORRECT} points for a 'correct' answer, with a bonus for lucky streaks!")
    print(f"But be careful! An 'unlucky' answer will cut your score in half and reset your streak.\n")
    print(f"Made by Oscar Press")


    player_name = input("First, please enter your name: ")
    print(f"Good luck, {player_name} , you’ll need it!\n")


    for i, q_data in enumerate(QUESTIONS):
        print(f"Question {i + 1}: {q_data['question']}")
       
        for option in q_data['options']:
            print(option)
       
        user_answer = input("Your answer (A or B): ").upper()


        if i == 0:
            lucky_outcome = random.choice(['A', 'B'])
            if user_answer == 'A':
                if lucky_outcome == 'A':
                    print("Yes you are!")
                    correct_streak += 1
                    points_earned = POINTS_FOR_CORRECT * correct_streak
                    print(f"That's {correct_streak} in a row!")
                    print(f"You earned {points_earned} points!\n")
                    score += points_earned
                else:
                    print("Are you sure about that?")
                    correct_streak = 0
                    score //= SCORE_DIVISOR
                    print("Your score has been halved and your streak is reset.\n")
            elif user_answer == 'B':
                if lucky_outcome == 'B':
                    print("So wrong, yet so right!")
                    correct_streak += 1
                    points_earned = POINTS_FOR_CORRECT * correct_streak
                    print(f"That's {correct_streak} in a row!")
                    print(f"You earned {points_earned} points!\n")
                    score += points_earned
                else:
                    print("Have more faith in yourself!")
                    correct_streak = 0
                    score //= SCORE_DIVISOR
                    print("Your score has been halved and your streak is reset.\n")
            else:
                print("That wasn't an option! Bad luck!")
                correct_streak = 0
                score //= SCORE_DIVISOR
                print("Your score has been halved and your streak is reset.\n")
        else:
            options_list = [opt.split('.')[0] for opt in q_data['options']]
            correct_answer = ""
            if random.random() < 0.5:
                correct_answer = user_answer
            else:
                wrong_options = [opt for opt in options_list if opt != user_answer]
                if wrong_options:
                    correct_answer = random.choice(wrong_options)
                else:
                    correct_answer = random.choice(options_list)


            if user_answer == correct_answer:
                correct_streak += 1
                points_earned = POINTS_FOR_CORRECT * correct_streak
                print(f"Correct! You won the 50/50 chance! That's {correct_streak} in a row!")
                print(f"You earned {points_earned} points!\n")
                score += points_earned
            else:
                correct_streak = 0
                print(f"Wrong! Bad luck! The randomly chosen answer was {correct_answer}.")
                score //= SCORE_DIVISOR
                print("Your score has been halved and your streak is reset.\n")
       
        print(f"Your current score is: {score}")
        print("----------------------------------------\n")


    print("Quiz finished, made by Oscar Press!")
    print(f"Your final score is: {score}")


    if score > 210:
        print("Lucky duck! You got the high score!")
        # --- ASCII art is printed here ---
        print(MIKU)
    else:
        print("Not lucky enough. I would try again if I was you.")
   
    save_score(player_name, score)


# --- Main execution ---
if __name__ == "__main__":
    run_quiz() 
